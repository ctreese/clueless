<!DOCTYPE html>
<html>
<head>
<title>Clueless Client Demo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
</head>
<body>
    <div class="navbar">
        <div class="navbar-inner">
            <a class="brand" href="#">Clueless Client Demo</a>
        </div>
    </div>
    <div id="main" class="container">
        <table class="table table-striped">
            <tr><td style="width: 1px;"></td><td><b>Client Input</b></td><td><b>Server Output</b></td></tr>
			<tr>
				<td style="width: 1px;"></td>
				<td>
                    <button class="btn" onclick = "register()">Register</button>
                </td>
                <td><p><b id = "register_text" ></b></p></td>
                
            </tr>
			<tr>
				<td style="width: 1px;"></td>
				<td>
                    <button class="btn" onclick = "deregister()">Deregister</button>
                </td>
                <td><p><b id = "deregister_text"></b></p></td>
                
            </tr>
			<tr>
				<td style="width: 1px;"></td>
				<td>
                    <button class="btn" onclick = "turns()">Turn</button>
                </td>
                <td><p><b id = "turn_text" ></b></p></td>
                
            </tr>
			<tr>
				<td style="width: 1px;"></td>
				<td>
                    <button class="btn" onclick = "gameOptions()">Turn Options</button>
                </td>
                <td><p><b id = "options_text"></b></p></td>
                
            </tr>
			<tr>
				<td style="width: 1px;"></td>
				<td>
                    <button class="btn" onclick = "legality()"> Legality</button>
                </td>
                <td><p><b id = "legality_text" ></b></p></td>
                
            </tr>
			<tr>
				<td style="width: 1px;"></td>
				<td>
                    <button class="btn" onclick = "move()">Move</button>
                </td>
                <td><p><b id = "move_text" ></b></p></td>
            </tr>
			<tr>
				<td style="width: 1px;"></td>
				<td>
                    <button class="btn" onclick = "gameInit()">Initalize</button>
                </td>
                <td><p><b id = "gameInit_text" ></b></p></td>
            </tr>
        </table>
    </div>
    <script type="text/javascript">
        // application code here!
		var playerName = "None"
		var nextMove = "exampleMove";
		//var register_output = "";
		//var deregister_output = "";
		//var turn_output = "";
		//var gameOptions_output = "";
		//var legality_output = "";
		//var move_output = "";
		//var gameInit_output = "";
		
		
		
		function register() {
			if(playerName == "None") {
				$.ajax({
					url: 'http://localhost:8000/register',
					type: 'GET',
					//data: 'ID=1&Name=John&Age=10', // or $('#myform').serializeArray()
					success: function(data) { 
						playerName = data.playername;
						var register_output = 'Playings as: ' + playerName
						var deregister_output = ""
						document.getElementById('legality_text').innerHTML = ""
						document.getElementById('gameInit_text').innerHTML = ""
						document.getElementById('move_text').innerHTML = ""
						document.getElementById('options_text').innerHTML = ""
						document.getElementById('turn_text').innerHTML = ""
						document.getElementById('register_text').innerHTML = register_output
						document.getElementById('deregister_text').innerHTML = deregister_output;}
				});
			}
		}
		
		function deregister() {
			$.ajax({
				url: 'http://localhost:8000/deregister/' + playerName,
				type: 'GET',
				//data: //need to obtain charactername here
				success: function() {
					var deregister_output = 'Deregistered player: ' + playerName
					playerName = "None"
					var register_output = 'Playings as: ' + playerName
					document.getElementById('register_text').innerHTML = register_output
					document.getElementById('legality_text').innerHTML = ""
					document.getElementById('gameInit_text').innerHTML = ""
					document.getElementById('move_text').innerHTML = ""
					document.getElementById('options_text').innerHTML = ""
					document.getElementById('turn_text').innerHTML = ""
					document.getElementById('deregister_text').innerHTML = deregister_output;}
			});	
		}
		
		function turns() {
			$.ajax({
				url: 'http://localhost:8000/turn/' + playerName,
				type: 'GET',
				//data: //need to obtain charactername here
				success: function(data) { 
				//alert('something about turns')
				var turn_output = "It is " + data.playerturn +"s turn."
				document.getElementById('turn_text').innerHTML = turn_output
				document.getElementById('options_text').innerHTML = ""
				document.getElementById('legality_text').innerHTML = ""
				document.getElementById('move_text').innerHTML = ""
				document.getElementById('gameInit_text').innerHTML = ""
				; }
			});
		}
		
		function gameOptions() {
			$.ajax({
				url: 'http://localhost:8000/options/' + playerName,
				type: 'GET',
				//data: //need to obtain charactername here
				success: function(data) { 
				document.getElementById('options_text').innerHTML = data.move_options
				document.getElementById('legality_text').innerHTML = ""
				document.getElementById('move_text').innerHTML = ""
				document.getElementById('turn_text').innerHTML = ""
				document.getElementById('gameInit_text').innerHTML = "";
				//alert('return options')
				; }
			});
		}
		
		function legality() {
			$.ajax({
				url: 'http://localhost:8000/legality/' + playerName + '/' + nextMove,
				type: 'GET',
				//data: //need to obtain charactername here
				success: function() { 
					//alert('return legality')
					var legality_output = playerName + ' can perform the following move: ' + nextMove
					document.getElementById('gameInit_text').innerHTML = ""
					document.getElementById('move_text').innerHTML = ""
					document.getElementById('options_text').innerHTML = ""
					document.getElementById('turn_text').innerHTML = ""
					document.getElementById('legality_text').innerHTML = legality_output;}
			});	
		}
		
		function move() {
			$.ajax({
				url: 'http://localhost:8000/move/' + playerName,
				type: 'POST',
				//data: //need to obtain charactername here
				success: function(data) { //alert('Move completed')
				var move_output = playerName + data.move
				document.getElementById('move_text').innerHTML = move_output
				document.getElementById('legality_text').innerHTML = ""
				document.getElementById('options_text').innerHTML = ""
				document.getElementById('turn_text').innerHTML = ""
				document.getElementById('gameInit_text').innerHTML = "";
				; }
			});
		}
		
		function gameInit() {
			$.ajax({
				url: 'http://localhost:8000/init',
				type: 'POST',
				//data: //need to obtain charactername here
				success: function(data) { 
				//alert('Info')
				//var init_message = data.message
				var available_characters = data.info;
				var gameInit_output = "You are playing the skeletal version of Clueless. Available players are: " + available_characters
				document.getElementById('legality_text').innerHTML = ""
				document.getElementById('move_text').innerHTML = ""
				document.getElementById('options_text').innerHTML = ""
				document.getElementById('turn_text').innerHTML = ""
				document.getElementById('gameInit_text').innerHTML = gameInit_output;}
			});
		}
		
    </script>
</body>
</html>